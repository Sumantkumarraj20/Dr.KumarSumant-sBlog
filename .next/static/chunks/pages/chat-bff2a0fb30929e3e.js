(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{564:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(7876);a(4232);var n=a(8230),l=a.n(n);function r(e){let{children:s}=e;return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsx)(l(),{href:"/",children:(0,t.jsx)("a",{className:"font-semibold text-xl",children:"Dr. Kumar Sumant"})}),(0,t.jsxs)("nav",{className:"space-x-4",children:[(0,t.jsx)(l(),{href:"/",children:(0,t.jsx)("a",{className:"hover:underline",children:"Home"})}),(0,t.jsx)(l(),{href:"/contact",children:(0,t.jsx)("a",{className:"hover:underline",children:"Contact"})}),(0,t.jsx)(l(),{href:"/chat",children:(0,t.jsx)("a",{className:"hover:underline",children:"Live Chat"})})]})]})}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-8 flex-1",children:s}),(0,t.jsx)("footer",{className:"bg-white border-t",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 text-sm text-slate-600",children:["\xa9 ",new Date().getFullYear()," Dr. Kumar Sumant \xb7 Evidence-based patient education"]})})]})}},618:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(7876),n=a(564),l=a(4232),r=a(7554);function c(){let[e,s]=(0,l.useState)([]),[a,c]=(0,l.useState)(""),[i,d]=(0,l.useState)(""),u=(0,l.useRef)(null);async function o(){let{data:e}=await r.N.from("messages").select("*").order("created_at",{ascending:!0}).limit(200);s(e||[])}async function x(e){null==e||e.preventDefault(),a&&i&&(await r.N.from("messages").insert([{name:i,text:a}]),c(""))}return(0,l.useEffect)(()=>{o();let e=r.N.channel("public:messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},e=>{s(s=>[...s,e.new])}).subscribe();return()=>{e.unsubscribe()}},[]),(0,l.useEffect)(()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})},[e]),(0,t.jsx)(n.A,{children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto bg-white p-4 rounded shadow flex flex-col",style:{height:"70vh"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("input",{placeholder:"Your name",value:i,onChange:e=>d(e.target.value),className:"border p-2 rounded"}),(0,t.jsx)("div",{className:"text-sm text-slate-500",children:"Live chat via Supabase (free for low usage)"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto p-2 space-y-2 border rounded",children:[e.map((e,s)=>(0,t.jsxs)("div",{className:"p-2 rounded",children:[(0,t.jsxs)("div",{className:"text-sm text-slate-600",children:[e.name," \xb7 ",(0,t.jsx)("span",{className:"text-xs text-slate-400",children:new Date(e.created_at).toLocaleString()})]}),(0,t.jsx)("div",{className:"mt-1",children:e.text})]},s)),(0,t.jsx)("div",{ref:u})]}),(0,t.jsxs)("form",{onSubmit:x,className:"mt-3 flex gap-2",children:[(0,t.jsx)("input",{className:"flex-1 p-2 border rounded",placeholder:"Message...",value:a,onChange:e=>c(e.target.value)}),(0,t.jsx)("button",{className:"px-4 py-2 bg-slate-800 text-white rounded",children:"Send"})]})]})})}},4480:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return a(618)}])},7554:(e,s,a)=>{"use strict";a.d(s,{N:()=>c});var t=a(2170),n=a(5364);let l=n.env.SUPABASE_URL||"",r=n.env.SUPABASE_KEY||"",c=(0,t.UU)(l,r)}},e=>{e.O(0,[230,170,636,593,792],()=>e(e.s=4480)),_N_E=e.O()}]);